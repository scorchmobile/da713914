<!-- HERO -->
<div id="main-hero" class="hidden-xs hidden-sm">
    <video autoplay loop poster="<%= image_path 'video/deputize-america-video-poster.jpg'  rescue nil %>" id="bgvid">
        <% if Rails.env.production? %>
            <source src="https://s3.amazonaws.com/deputizeamerica/videos/da-video.mp4" type="video/mp4">
            <source src="https://s3.amazonaws.com/deputizeamerica/videos/da-video.ogv" type="video/ogv">
        <% end %>
    </video>

    <div id="hero-carousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner" role="listbox">
            <% @facts.each_with_index do |fact, index| %>
            <div class="item <%= 'active' if index.eql?(0) %>" >
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-xs-10 col-xs-offset-1 col-sm-4 col-sm-offset-4 col-md-4 col-md-offset-4 main-hero-fact">
                            <p><%= fact.headline %></p>
                            <p><%= fact.line_one %><br><%= fact.line_two %></p>
                        </div>
                    </div>
                </div>
            </div>
            <% end  unless @facts.blank? %>
        </div>
    </div>
    <a class="left carousel-control" href="#hero-carousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#hero-carousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>

    <div class="main-hero-title">
        <div class="container-fluid">
            <div class="row">
                <div class="col-xs-12 col-sm-12 white-shadow">
                    America's Personal Security App
                </div>
            </div>
        </div>
    </div>
</div>

<%= sanitize @page.sections[0].content, tags: %w{ div img h1 h2 h3 h4 h5 h6 p span code em strong ul li i a br hr table thead tbody tr th td }, attributes: %w{ id class data-ride role src href style data-toggle data-target type }  rescue nil %>

<!-- DEPUTY VIDEO -->
<div id="deputy" class="video-pane michael hidden-xs hidden-sm">
    <div class="fittobox">
        <iframe src="<%= @video_deputy.hyperlink  rescue nil %>" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
    </div>
    <div class="call-to-action top-left hidden-xs hidden-sm">
        <%= link_to @video_deputy.link_text, '#', class: 'deputy', data: { toggle: 'modal', target: '#preRegisterModal' }  rescue nil %>
    </div>
</div>

<!-- DEPUTY TESTIMONIAL -->
<div id="deputy-carousel" class="carousel slide" data-ride="carousel">
    <!-- Indicators -->
    <ol class="carousel-indicators">
        <% @deputy_testimonials.each_with_index do |testimonial, index| %>
        <li data-target="#deputy-carousel" data-slide-to="<%= index %>" class="<%= 'active'  if index.eql?(0) %>"></li>
        <% end  unless @deputy_testimonials.blank? %>
    </ol>
    <div class="carousel-inner" role="listbox">
        <% @deputy_testimonials.each_with_index do |testimonial, index| %>
        <div class="item <%= 'active'  if index.eql?(0) %>" >
            <img class="slide-<%= index+1 %>" src="<%= image_path testimonial.image_url  rescue nil %>" alt="First slide">
            <div class="container">
                <div class="testimonial-pane">
                    <div class="testimonial-box deputy" sytle="bottom: <%= testimonial.css_bottom  rescue nil %>; left: <%= testimonial.css_left  rescue nil %>;">
                        <p class="author"><%= testimonial.author  rescue nil %></p>
                        <p class="content deputy"><%= testimonial.content  rescue nil %></p>
                    </div>
                </div>
            </div>
        </div>
        <% end  unless @deputy_testimonials.blank? %>
    </div>
    <a class="left carousel-control" href="#deputy-carousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#deputy-carousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

<%= sanitize @page.sections[1].content, tags: %w{ div img h1 h2 h3 h4 h5 h6 p span code em strong ul li i a br hr table thead tbody tr th td }, attributes: %w{ id class data-ride role src href style data-toggle data-target type }  rescue nil %>

<!-- PERSONAL VIDEO -->
<div class="video-pane app hidden-xs hidden-sm">
    <div class="fittobox">
        <iframe src="<%= @video_family.hyperlink  rescue nil %>" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
    </div>
    <div class="call-to-action top-left">
        <%= link_to @video_family.link_text, '#', class: 'family', data: { toggle: 'modal', target: '#preRegisterModal' }  rescue nil %>
    </div>
</div>

<!-- PERSONAL TESTIMONIAL -->
<div id="personal-carousel" class="carousel slide" data-ride="carousel">
    <!-- Indicators -->
    <ol class="carousel-indicators">
        <% @family_testimonials.each_with_index do |testimonial, index| %>
        <li data-target="#personal-carousel" data-slide-to="<%= index %>" class="<%= 'active'  if index.eql?(0) %>"></li>
        <% end  unless @family_testimonials.blank? %>
    </ol>
    <div class="carousel-inner" role="listbox">
        <% @family_testimonials.each_with_index do |testimonial, index| %>
        <div class="item <%= 'active'  if index.eql?(0) %>" >
            <img class="slide-<%= index+1 %>" src="<%= image_path testimonial.image_url  rescue nil %>" alt="First slide">
            <div class="container">
                <div class="testimonial-pane">
                    <div class="testimonial-box family" sytle="bottom: <%= testimonial.css_bottom  rescue nil %>; left: <%= testimonial.css_left  rescue nil %>;">
                        <p class="author"><%= testimonial.author %></p>
                        <p class="content deputy"><%= testimonial.content %></p>
                    </div>
                </div>
            </div>
        </div>
        <% end  unless @family_testimonials.blank? %>
    </div>
    <a class="left carousel-control" href="#personal-carousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#personal-carousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>


<%= sanitize @page.sections[2].content, tags: %w{ div img h1 h2 h3 h4 h5 h6 p span code em strong ul li i a br hr table thead tbody tr th td }, attributes: %w{ id class data-ride role src href style data-toggle data-target type }  rescue nil %>

<!-- MODAL -->
<div class="modal fade" id="preRegisterModal" tabindex="-1" role="dialog" aria-labelledby="preRegisterModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <!-- HEADER -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="centered" style="font-size: 2.5em; margin-bottom: 27px;">YOU ARE HALF WAY THERE</h4>
                <div class="progress">
                  <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
                    <span class="sr-only">50% Complete</span>
                  </div>
                </div>
            </div>

            <%= simple_form_for @data, url: send_form_path, method: :post do |f| %>
                <!-- BODY -->
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-10 col-sm-offset-1">
                            <%= f.error_notification %>
                            <div class="row">
                                <div class="col-xs-12">
                                    <%= f.input :member_type, as: :radio_buttons, collection: [['I want to be a Deputy', 'Deputy'], ['I want the App for my Family', 'Family'], ['I want Both', 'Both']], label: 'What Are You Interested In?' %>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xs-12 col-md-4" style="margin: 10px 0;">
                                    <%= f.input :first_name, placeholder: 'John', label: 'First Name' %>
                                </div>
                                <div class="col-xs-12 col-md-4" style="margin: 10px 0;">
                                    <%= f.input :middle_name, placeholder: 'Tildon', label: 'Middle Name' %>
                                </div>
                                <div class="col-xs-12 col-md-4" style="margin: 10px 0;">
                                    <%= f.input :last_name, placeholder: 'Smith', label: 'Last Name' %>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xs-12 col-md-6" style="margin: 5px 0;">
                                    <%= f.input :email, placeholder: 'john@domain.com' %>
                                </div>
                                <div class="col-xs-12 col-md-6" style="margin: 5px 0;">
                                    <%= f.input :phone, placeholder: '214-990-0022' %>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xs-12 col-md-4" style="margin: 5px 0 10px;">
                                    <%= f.input :street1, placeholder: '1135 Main St.', label: 'Street' %>
                                </div>
                                <div class="col-xs-12 col-md-4" style="margin: 5px 0 10px;">
                                    <%= f.input :street2, placeholder: 'Suite 112', label: 'Street 2' %>
                                </div>
                                <div class="col-xs-12 col-md-4" style="margin: 5px 0 10px;">
                                    <%= f.input :zipcode, placeholder: '75244' %>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- FOOTER -->
                <div class="modal-footer">
                    <%= f.submit 'PRE-REGISTER NOW', class: 'btn btn-red btn-lg btn-primary btn-default', style: 'width: 100%; margin-top: 12px;' %>
                </div>
            <% end %>
        </div>
    </div>
</div>


<% content_for :dj do %>
    <script type="text/javascript">
        // PAGE SCROLLING
        var $root = $('html, body');
        $('a.pageNav').click(function() {
            var href = $.attr(this, 'href');
            console.log(href);
            console.log($(href));
            $root.animate({
                scrollTop: $(href).offset().top
            }, 500, function () {
                window.location.hash = href;
            });
            return false;
        });
        // OTHER
        $(function(){
            // Logic
        });

    </script>
<% end %>
